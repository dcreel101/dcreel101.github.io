---
import BaseLayout from "@layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import dayjs from "dayjs";
import localizedFormat from "dayjs/plugin/localizedFormat";
import profile from "public/profile.jpg";
dayjs.extend(localizedFormat);
---

<BaseLayout
    title="Contact Me"
    description="Contact David Creel"
    image=""
    ogType="article"
>
    <main class="md:flex md:justify-center">
        <article
            class="prose prose-lg max-w-full min-w-5/6 prose-img:mx-auto w-5/6"
        >
            <Image
                src={profile}
                alt="David Creel"
                class="rounded-lg w-1/3 min-w-48"
            />
            <h1 class="title my-2 text-4xl font-bold">
                Contact Me
                <div class="badge badge-secondary my-1">author</div>
            </h1>
            <form
                method="post"
                action="https://forms.un-static.com/forms/c69591ca8a89f98ee6f3a31cb32e38e63ab3d840"
            >
                <div class="grid grid-cols-1 gap-4">
                    <div class="flex flex-col">
                        <label for="name">Name</label>
                        <input
                            type="text"
                            name="name"
                            id="name"
                            autocomplete="name"
                            required
                            maxlength="200"
                            class="input input-bordered"
                        />
                    </div>
                    <div class="flex flex-col">
                        <label for="name">Email Address</label>
                        <input
                            id="email"
                            name="email"
                            type="email"
                            autocomplete="email"
                            required
                            maxlength="200"
                            class="input input-bordered"
                        />
                    </div>
                    <div class="flex flex-col">
                        <label for="name">Subject</label>
                        <input
                            type="text"
                            name="subject"
                            id="subject"
                            autocomplete="subject"
                            required
                            maxlength="200"
                            minlength="5"
                            class="input input-bordered"
                        />
                    </div>
                    <div class="flex flex-col">
                        <label for="name">Message</label>
                        <textarea
                            id="message"
                            name="message"
                            rows="6"
                            required
                            maxlength="16384"
                            minlength="5"
                            class="block w-full textarea textarea-bordered"
                        ></textarea>
                    </div>
                    <div class="flex justify-end">
                        <button type="submit" class="btn btn-primary"
                            >Send</button
                        >
                    </div>
                </div>
            </form>
        </article>
    </main>
</BaseLayout>
<script lang="javascript" is:inline>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const subject = urlParams.get("subject");
    document.getElementById("subject").value = subject;
</script>
